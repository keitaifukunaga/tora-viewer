(function(){"use strict";try{if(typeof document!="undefined"){var e=document.createElement("style");e.appendChild(document.createTextNode(".tora-viewer.tora-viewer-root{--default-width: 840;--default-wide-width: 1680;--default-height: 1188}.tora-viewer.tora-viewer-root{font-family:sans-serif;height:100%;margin:0;padding:0;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center}.tora-viewer.tora-viewer-root *,.tora-viewer.tora-viewer-root :before,.tora-viewer.tora-viewer-root :after{box-sizing:border-box;margin:0;padding:0}.tora-viewer.tora-viewer-root .modal-bg{position:absolute;width:100%;height:100%;inset:0;background-color:#000;opacity:.7}.tora-viewer.tora-viewer-root .modal-bg.viewer-bg{display:none}.tora-viewer.tora-viewer-root button{cursor:pointer}.tora-viewer.tora-viewer-root .viewer-main{width:100%;position:relative;inset:0;display:flex;justify-content:center;pointer-events:none}.tora-viewer.tora-viewer-root .viewer-main>*{pointer-events:auto}.tora-viewer.tora-viewer-root .viewer-thumbnails{overflow:hidden;max-width:25%;max-height:25%;display:flex;align-items:stretch;flex-direction:column;background-color:#fff;aspect-ratio:var(--default-width)/var(--default-height)}.tora-viewer.tora-viewer-root .viewer-thumbnails .viewer-page-thumbnail{width:100%;height:100%;background-color:#fff;display:flex;align-items:center;justify-content:center;aspect-ratio:var(--default-width)/var(--default-height)}.tora-viewer.tora-viewer-root .viewer-thumbnails .viewer-page-thumbnail .viewer-page-thumbnail-content{display:none;width:auto;height:auto;max-width:100%;max-height:100%}.tora-viewer.tora-viewer-root .viewer-thumbnails .viewer-page-thumbnail .viewer-page-thumbnail-content.viewer-page-thumbnail-content{display:block}.tora-viewer.tora-viewer-root svg.viewer-fa-icon{height:1em}.tora-viewer.tora-viewer-root .viewer-pages{scroll-behavior:smooth;display:flex;align-items:stretch;flex-direction:column;scrollbar-width:none;aspect-ratio:var(--default-width)/var(--default-height)}.tora-viewer.tora-viewer-root .viewer-pages::-webkit-scrollbar{display:none}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page{position:relative;width:100%;height:100%;background-color:#fff;aspect-ratio:var(--default-width)/var(--default-height)}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .viewer-page-content{width:auto;height:auto;max-width:100%;max-height:100%}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .viewer-page-content.viewer-page-vertically-long{width:auto;height:100%}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .empty-page-inner{width:100%;height:100%}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .embed-page-inner{width:100%;height:100%;overflow:hidden}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .embed-page-inner .embed-page-default{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .viewer-page-loading{position:absolute;display:none;margin:auto;width:56px;height:56px;border:12px solid rgba(0,0,0,.4);border-top:12px solid transparent;border-radius:40px;-webkit-animation:rolling 1s linear infinite;animation:rolling 1s linear infinite}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .viewer-page-loading.viewer-page-loading-active{display:block}@-webkit-keyframes rolling{0%{transform:rotate(0);transform-origin:center}to{transform:rotate(360deg);transform-origin:center}}@keyframes rolling{0%{transform:rotate(0);transform-origin:center}to{transform:rotate(360deg);transform-origin:center}}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .viewer-page-tap-area{position:absolute;display:none;top:0;width:30%;height:100%;cursor:pointer}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .viewer-page-tap-area.viewer-page-area-left{left:0}.tora-viewer.tora-viewer-root .viewer-pages .viewer-page .viewer-page-tap-area.viewer-page-area-right{right:0}.tora-viewer.tora-viewer-root .viewer-close-button{color:#fff;font-weight:400;font-size:34px;line-height:45px;background-color:#303134;border-width:0;border-radius:50%;position:absolute;width:36px;height:36px;top:2px;right:2px}.tora-viewer.tora-viewer-root .embed-page-default-close{font-weight:400;font-size:24px;width:60%;min-width:200px;max-width:360px;height:60px;border-width:0;border-radius:30px;color:#fff;background-color:#ea4c89}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-main{align-items:center}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-pages{width:100%;height:100%;align-items:center;flex-direction:row-reverse;overflow-x:scroll;scroll-snap-type:x mandatory;aspect-ratio:var(--default-width)/var(--default-height)}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-pages .viewer-page{scroll-snap-align:end;scroll-snap-stop:always;margin:0 20px;display:flex;align-items:center;justify-content:center}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-pages .viewer-page.empty-page{display:none;scroll-snap-align:none}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-pages .viewer-page.embed-page .viewer-page-tap-area{display:none}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-pages .viewer-page .viewer-page-tap-area{display:block}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-thumbnails{flex-direction:row-reverse;scroll-snap-type:x mandatory}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-thumbnails .viewer-page-thumbnail{scroll-snap-align:end;margin:0 10px}.tora-viewer.tora-viewer-root.horizontal-viewer.horizontal-rtl .viewer-pages .viewer-page:first-child .viewer-page-tap-area.viewer-page-area-right{display:none}.tora-viewer.tora-viewer-root.horizontal-viewer.horizontal-ltr .viewer-pages{flex-direction:row}.tora-viewer.tora-viewer-root.horizontal-viewer.horizontal-ltr .viewer-pages .viewer-page{scroll-snap-align:start}.tora-viewer.tora-viewer-root.horizontal-viewer.horizontal-ltr .viewer-pages .viewer-page:first-child .viewer-page-tap-area.viewer-page-area-left{display:none}.tora-viewer.tora-viewer-root.horizontal-viewer.horizontal-ltr .viewer-pages .viewer-page.empty-page{scroll-snap-align:none}.tora-viewer.tora-viewer-root.horizontal-viewer.horizontal-ltr .viewer-thumbnails{flex-direction:row}.tora-viewer.tora-viewer-root.horizontal-viewer.horizontal-ltr .viewer-thumbnails .viewer-page-thumbnail{scroll-snap-align:start}.tora-viewer.tora-viewer-root.modal-viewer{position:fixed;top:0;left:0;width:100%;height:100%}.tora-viewer.tora-viewer-root.modal-viewer .modal-bg.viewer-bg{display:block}.tora-viewer.tora-viewer-root.modal-viewer .viewer-main{position:absolute}.tora-viewer.tora-viewer-root.modal-viewer .viewer-main .viewer-pages{width:auto}.tora-viewer.tora-viewer-root .page-style-checker{position:absolute;display:none}.tora-viewer.tora-viewer-root.page-style-spread .viewer-main{padding-top:50px;padding-bottom:50px}.tora-viewer.tora-viewer-root.page-style-spread .viewer-close-button{font-size:34px;line-height:45px;background-color:transparent}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-rtl .viewer-pages .viewer-page.regular-page:nth-child(odd){margin-left:0}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-rtl .viewer-pages .viewer-page.regular-page:nth-child(odd) .viewer-page-area-left{display:none}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-rtl .viewer-pages .viewer-page.regular-page:nth-child(even),.tora-viewer.tora-viewer-root.page-style-spread.horizontal-rtl .viewer-pages .viewer-page.empty-page{margin-right:0}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-rtl .viewer-pages .viewer-page.regular-page:nth-child(even) .viewer-page-area-right,.tora-viewer.tora-viewer-root.page-style-spread.horizontal-rtl .viewer-pages .viewer-page.empty-page .viewer-page-area-right{display:none}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-rtl .viewer-thumbnails .viewer-page-thumbnail:nth-child(odd){margin-left:0}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-rtl .viewer-thumbnails .viewer-page-thumbnail:nth-child(even){margin-right:0}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-ltr .viewer-pages .viewer-page.regular-page:nth-child(odd){margin-right:0}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-ltr .viewer-pages .viewer-page.regular-page:nth-child(odd) .viewer-page-area-right{display:none}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-ltr .viewer-pages .viewer-page.regular-page:nth-child(even),.tora-viewer.tora-viewer-root.page-style-spread.horizontal-ltr .viewer-pages .viewer-page.empty-page{margin-left:0}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-ltr .viewer-pages .viewer-page.regular-page:nth-child(even) .viewer-page-area-left,.tora-viewer.tora-viewer-root.page-style-spread.horizontal-ltr .viewer-pages .viewer-page.empty-page .viewer-page-area-left{display:none}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-ltr .viewer-thumbnails .viewer-page-thumbnail:nth-child(odd){margin-right:0}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-ltr .viewer-thumbnails .viewer-page-thumbnail:nth-child(even){margin-left:0}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-pages{aspect-ratio:var(--default-wide-width)/var(--default-height)}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-pages .viewer-page.regular-page,.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-pages .viewer-page.empty-page{max-width:50%}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-pages .viewer-page.regular-page:nth-child(even){scroll-snap-align:none}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-pages .viewer-page.embed-page{aspect-ratio:var(--default-wide-width)/var(--default-height)}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-pages .viewer-page.empty-page:nth-child(even){display:flex}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-pages .viewer-page-tap-area{width:60%}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-thumbnails{aspect-ratio:var(--default-wide-width)/var(--default-height)}.tora-viewer.tora-viewer-root.page-style-spread.horizontal-viewer .viewer-thumbnails .viewer-page-thumbnail:nth-child(even){scroll-snap-align:none}.tora-viewer.tora-viewer-root.page-style-spread .page-style-checker{display:block}@media (min-width: 640px) and (orientation: landscape){.tora-viewer.tora-viewer-root.page-style-auto .viewer-main{padding-top:50px;padding-bottom:50px}.tora-viewer.tora-viewer-root.page-style-auto .viewer-close-button{font-size:34px;line-height:45px;background-color:transparent}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-rtl .viewer-pages .viewer-page.regular-page:nth-child(odd){margin-left:0}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-rtl .viewer-pages .viewer-page.regular-page:nth-child(odd) .viewer-page-area-left{display:none}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-rtl .viewer-pages .viewer-page.regular-page:nth-child(even),.tora-viewer.tora-viewer-root.page-style-auto.horizontal-rtl .viewer-pages .viewer-page.empty-page{margin-right:0}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-rtl .viewer-pages .viewer-page.regular-page:nth-child(even) .viewer-page-area-right,.tora-viewer.tora-viewer-root.page-style-auto.horizontal-rtl .viewer-pages .viewer-page.empty-page .viewer-page-area-right{display:none}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-rtl .viewer-thumbnails .viewer-page-thumbnail:nth-child(odd){margin-left:0}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-rtl .viewer-thumbnails .viewer-page-thumbnail:nth-child(even){margin-right:0}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-ltr .viewer-pages .viewer-page.regular-page:nth-child(odd){margin-right:0}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-ltr .viewer-pages .viewer-page.regular-page:nth-child(odd) .viewer-page-area-right{display:none}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-ltr .viewer-pages .viewer-page.regular-page:nth-child(even),.tora-viewer.tora-viewer-root.page-style-auto.horizontal-ltr .viewer-pages .viewer-page.empty-page{margin-left:0}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-ltr .viewer-pages .viewer-page.regular-page:nth-child(even) .viewer-page-area-left,.tora-viewer.tora-viewer-root.page-style-auto.horizontal-ltr .viewer-pages .viewer-page.empty-page .viewer-page-area-left{display:none}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-ltr .viewer-thumbnails .viewer-page-thumbnail:nth-child(odd){margin-right:0}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-ltr .viewer-thumbnails .viewer-page-thumbnail:nth-child(even){margin-left:0}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-pages{aspect-ratio:var(--default-wide-width)/var(--default-height)}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-pages .viewer-page.regular-page,.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-pages .viewer-page.empty-page{max-width:50%}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-pages .viewer-page.regular-page:nth-child(even){scroll-snap-align:none}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-pages .viewer-page.embed-page{aspect-ratio:var(--default-wide-width)/var(--default-height)}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-pages .viewer-page.empty-page:nth-child(even){display:flex}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-pages .viewer-page-tap-area{width:60%}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-thumbnails{aspect-ratio:var(--default-wide-width)/var(--default-height)}.tora-viewer.tora-viewer-root.page-style-auto.horizontal-viewer .viewer-thumbnails .viewer-page-thumbnail:nth-child(even){scroll-snap-align:none}.tora-viewer.tora-viewer-root.page-style-auto .page-style-checker{display:block}}.tora-viewer.tora-viewer-root .viewer-control-area{position:absolute;inset:0;width:100%;height:100%;pointer-events:none;opacity:0;visibility:hidden;transition:opacity 1s,visibility 1s;background:linear-gradient(180deg,rgba(255,255,255,0) 70%,rgba(48,49,52,.4290309874) 85%,#1f2021 100%)}.tora-viewer.tora-viewer-root .viewer-control-area.viewer-control-area-visible{opacity:1;visibility:visible}.tora-viewer.tora-viewer-root .viewer-control-area>*{pointer-events:auto}.tora-viewer.tora-viewer-root .viewer-header-ctrl{position:absolute;width:100%;height:50px;inset:0 0 auto;margin:auto;display:flex;align-items:center;justify-content:center;background:#303134}.tora-viewer.tora-viewer-root .viewer-title{display:flex;align-items:center;justify-content:center;width:calc(100% - 72px);font-weight:700;font-size:16px;color:#fff}.tora-viewer.tora-viewer-root .viewer-title .viewer-title-inner{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.tora-viewer.tora-viewer-root .arrow-button{position:absolute;top:50%;transform:translateY(-50%);width:100px;height:200px;border-width:0;background-color:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center}.tora-viewer.tora-viewer-root .arrow-button .arrow-button-inner{display:block;width:32px;height:32px;border:10px solid;border-color:transparent;filter:drop-shadow(0px 0px 10px rgba(0,0,0,.5))}@media only screen and (min-width: 480px){.tora-viewer.tora-viewer-root .arrow-button .arrow-button-inner{width:50px;height:50px}}.tora-viewer.tora-viewer-root .arrow-button.arrow-button-left{left:0}.tora-viewer.tora-viewer-root .arrow-button.arrow-button-left .arrow-button-inner{margin-left:-40px;border-bottom-color:#fff;border-left-color:#fff;transform:scaleX(.8) translate(35.4%) rotate(45deg)}.tora-viewer.tora-viewer-root .arrow-button.arrow-button-right{right:0}.tora-viewer.tora-viewer-root .arrow-button.arrow-button-right .arrow-button-inner{margin-right:-40px;border-top-color:#fff;border-right-color:#fff;transform:scaleX(.8) translate(-35.4%) rotate(45deg)}.tora-viewer.tora-viewer-root .viewer-footer-ctrl{position:absolute;width:100%;height:50px;inset:auto 0 0;margin:auto;overflow:hidden;overscroll-behavior:none;background:#303134;display:flex;align-items:center;justify-content:center}.tora-viewer.tora-viewer-root .viewer-page-selector{--viewer-page-selector-bg-color: #fff;--viewer-page-selector-active-bg-color: #3aa3e3;pointer-events:all;display:none;width:80%;height:10px;margin:auto;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;background:var(--viewer-page-selector-bg-color);border-radius:5px;cursor:pointer}.tora-viewer.tora-viewer-root .viewer-page-selector::-webkit-slider-thumb{-webkit-appearance:none;background:#3aa3e3;width:20px;height:20px;border-radius:50%}.tora-viewer.tora-viewer-root .viewer-page-selector::-moz-range-thumb{background:#3aa3e3;width:20px;height:20px;border-radius:50%}.tora-viewer.tora-viewer-root .viewer-page-selector::-moz-focus-outer{border:0}.tora-viewer.tora-viewer-root .view-settings-button{color:#fff;font-weight:400;font-size:32px;line-height:50px;background-color:transparent;border-width:0;width:42px;height:42px}.tora-viewer.tora-viewer-root.horizontal-viewer .viewer-page-selector{display:block;direction:rtl}.tora-viewer.tora-viewer-root.horizontal-viewer.horizontal-ltr .viewer-page-selector{display:block;direction:ltr}.tora-viewer.tora-viewer-root.viewer-first-page-shown.horizontal-rtl .arrow-button-right,.tora-viewer.tora-viewer-root.viewer-first-page-shown.horizontal-ltr .arrow-button-left,.tora-viewer.tora-viewer-root.viewer-last-page-shown.horizontal-rtl .arrow-button-left,.tora-viewer.tora-viewer-root.viewer-last-page-shown.horizontal-ltr .arrow-button-right{display:none}.tora-viewer.tora-viewer-root .viewer-preview{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;height:calc(100% - 50px);position:absolute;bottom:50px;display:none;flex-direction:column;align-items:center;justify-content:flex-end}.tora-viewer.tora-viewer-root .viewer-preview.viewer-preview-show{display:flex}.tora-viewer.tora-viewer-root .viewer-preview-page-count{font-weight:400;font-size:20px;color:#fff;display:flex;align-items:center;justify-content:center}.tora-viewer.tora-viewer-root .view-settings{width:100%;height:100%;position:absolute;justify-content:center;font-weight:400;font-size:16px;opacity:0;visibility:hidden;transition:opacity .5s,visibility .5s}.tora-viewer.tora-viewer-root .view-settings.show-settings{opacity:1;visibility:visible}.tora-viewer.tora-viewer-root .view-settings .view-settings-title{width:100%;height:48px;padding:14px;font-weight:400;font-size:20px;color:#fff;background-color:#303134;border-bottom:1px solid #dddddd;display:flex;align-items:center;justify-content:center}.tora-viewer.tora-viewer-root .view-settings .view-settings-main{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;min-width:320px;max-width:560px;height:315px;background-color:#fff;overflow:auto}.tora-viewer.tora-viewer-root .view-settings .view-settings-main .view-settings-close-button{color:#fff;font-weight:400;font-size:30px;line-height:48px;background-color:transparent;border-width:0;position:absolute;width:36px;height:36px;top:2px;right:2px}.tora-viewer.tora-viewer-root .view-settings .view-settings-content{margin:0 auto;padding:32px 12px 0}@media only screen and (min-width: 480px){.tora-viewer.tora-viewer-root .view-settings .view-settings-content{padding:32px 24px 0}}.tora-viewer.tora-viewer-root .view-settings .view-settings-content-title{display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;margin-bottom:16px}.tora-viewer.tora-viewer-root .view-settings .view-settings-radio-groups{display:flex;justify-content:space-around;align-content:center;align-items:stretch;border:unset;border-radius:4px;background-color:#ddd;min-height:40px;overflow:hidden}.tora-viewer.tora-viewer-root .view-settings .view-settings-radio-groups .view-settings-label{display:inline-block;flex:1;border-left:1px solid #b6b6b6;cursor:pointer}.tora-viewer.tora-viewer-root .view-settings .view-settings-radio-groups .view-settings-label:first-child{border-left-width:0px}.tora-viewer.tora-viewer-root .view-settings .view-settings-radio-groups .view-settings-label .view-settings-radio{display:none}.tora-viewer.tora-viewer-root .view-settings .view-settings-radio-groups .view-settings-label .view-settings-radio:checked+.view-settings-label-text{color:#fff;background-color:#ea4c89}.tora-viewer.tora-viewer-root .view-settings .view-settings-radio-groups .view-settings-label .view-settings-label-text{display:inline-flex;justify-content:center;align-items:center;width:100%;height:100%;font-weight:400}")),document.head.appendChild(e)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();
var __defProp=Object.defineProperty,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__publicField=(e,t,i)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,i),i),__accessCheck=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},__privateGet=(e,t,i)=>(__accessCheck(e,t,"read from private field"),i?i.call(e):t.get(e)),__privateAdd=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},__privateSet=(e,t,i,a)=>(__accessCheck(e,t,"write to private field"),a?a.call(e,i):t.set(e,i),i),__privateMethod=(e,t,i)=>(__accessCheck(e,t,"access private method"),i);!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).toraViewer=t()}(this,(function(){var e,t,i,a,s,r,n,h,_,o,p,d,v,l,c,u,g,m,w,f,G,S,k,b,L,M,A,y,N,E,W,x,T,R,P,C,z,$,I,F,O,j,B,D,V,X,H,q,U,J,K,Q,Y,Z,ee,te,ie,ae,se,re,ne,he,_e,oe,pe,de;const ve="tora-viewer",le=["normal","spread","auto"],ce=["horizontal-ltr","horizontal-rtl"];var ue={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="xmark",i=[128473,10005,10006,10060,215,"close","multiply","remove","times"],a="f00d",s="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z";e.definition={prefix:"fas",iconName:t,icon:[320,512,i,a,s]},e.faXmark=e.definition,e.prefix="fas",e.iconName=t,e.width=320,e.height=512,e.ligatures=i,e.unicode=a,e.svgPathData=s,e.aliases=i}(ue);const ge={h:(e,t,...i)=>({tag:e,props:t,children:i}),fragment:({children:e})=>e};class me{createRef(e){return{current:null,setup:e}}}class we extends me{constructor(h){super(),__publicField(this,"index"),__privateAdd(this,e,void 0),__privateAdd(this,t,!1),__privateAdd(this,i,void 0),__privateAdd(this,a,void 0),__privateAdd(this,s,void 0),__privateAdd(this,r,void 0),__privateAdd(this,n,void 0),this.index=h.index,__privateSet(this,e,h),__privateSet(this,i,this.createRef()),__privateSet(this,a,this.createRef()),__privateSet(this,s,this.createRef()),__privateSet(this,r,this.createRef((t=>{t.addEventListener("click",(t=>{t.stopPropagation(),__privateGet(this,e).onTapLeft()}))}))),__privateSet(this,n,this.createRef((t=>{t.addEventListener("click",(t=>{t.stopPropagation(),__privateGet(this,e).onTapRight()}))})))}get element(){return __privateGet(this,i).current}get thumbnailElement(){return __privateGet(this,a).current}setup(e){__privateGet(this,i).setup=e,__privateGet(this,i).current&&e(__privateGet(this,i).current)}showLoading(){var e;__privateSet(this,t,!0),null==(e=__privateGet(this,s).current)||e.classList.add("viewer-page-loading-active")}hideLoading(){var e;__privateSet(this,t,!1),null==(e=__privateGet(this,s).current)||e.classList.remove("viewer-page-loading-active")}createElement(){return ge.h("p",{ref:__privateGet(this,i),classNames:["viewer-page",...this.pageClasses()]},this.createElementPage(),ge.h("div",{ref:__privateGet(this,s),classNames:__privateGet(this,t)?["viewer-page-loading","viewer-page-loading-active"]:["viewer-page-loading"]}),ge.h("div",{ref:__privateGet(this,r),classNames:["viewer-page-tap-area","viewer-page-area-left"]}),ge.h("div",{ref:__privateGet(this,n),classNames:["viewer-page-tap-area","viewer-page-area-right"]}))}createThumbnailElement(){return ge.h("p",{classNames:["viewer-page-thumbnail"],ref:__privateGet(this,a)},this.createThumbnailElementPage())}pageClasses(){return[]}createThumbnailElementPage(){const e=document.createElement("div");return e.classList.add("viewer-page-thumbnail-inner"),e}}e=new WeakMap,t=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,r=new WeakMap,n=new WeakMap;class fe extends we{constructor(e,t){super(t),__privateAdd(this,l),__privateAdd(this,h,void 0),__privateAdd(this,_,void 0),__privateAdd(this,o,void 0),__privateAdd(this,p,!1),__privateAdd(this,d,!1),__privateAdd(this,v,void 0),__privateSet(this,h,t.size),__privateSet(this,_,t.size.width/t.size.height),__privateSet(this,o,e),__privateSet(this,v,this.createRef()),this.showLoading()}pageClasses(){return["regular-page"]}createElementPage(){return ge.h("canvas",{width:__privateGet(this,h).width,height:__privateGet(this,h).height,classNames:["viewer-page-content"],ref:__privateGet(this,v)})}createThumbnailElementPage(){const e=new Image;return __privateGet(this,o).then((t=>{const i="string"==typeof t?t:t.thumbnailUrl||t.url;e.src=i,e.addEventListener("load",(()=>{e.classList.add("viewer-page-thumbnail-content-loaded")}))})),e.classList.add("viewer-page-thumbnail-content"),e}get loaded(){return __privateGet(this,p)}async contentLoad(){var e;if(__privateGet(this,p))return Promise.resolve();const t=null==(e=__privateGet(this,v).current)?void 0:e.getContext("2d");if(!t)return Promise.reject("The rendering context is not ready.");__privateSet(this,p,!0);const i=await __privateGet(this,o),a=new Image;a.src="string"==typeof i?i:i.url;const s=()=>{window.setTimeout((()=>{__privateGet(this,d)||__privateSet(this,p,!1)}),3e4)};return new Promise(((e,r)=>{a.addEventListener("load",(()=>{this.hideLoading(),__privateMethod(this,l,c).call(this,t,a,i),__privateSet(this,d,!0),e()})),a.addEventListener("abort",r),a.addEventListener("error",r),a.addEventListener("abort",s),a.addEventListener("error",s)}))}}h=new WeakMap,_=new WeakMap,o=new WeakMap,p=new WeakMap,d=new WeakMap,v=new WeakMap,l=new WeakSet,c=function(e,t,i){var a,s;const r="string"==typeof i?t.width:null!=(a=i.width)?a:t.width,n="string"==typeof i?t.height:null!=(s=i.height)?s:t.height;if(__privateGet(this,v).current){__privateGet(this,v).current.setAttribute("width",`${r}`),__privateGet(this,v).current.setAttribute("height",`${n}`);r/n<__privateGet(this,_)&&__privateGet(this,v).current.classList.add("viewer-page-vertically-long")}e.drawImage(t,0,0,r,n,0,0,r,n)};class Ge extends we{constructor(e){super(e),__publicField(this,"index"),this.index=e.index}pageClasses(){return["empty-page"]}createElementPage(){return ge.h("div",{classNames:["empty-page-inner"]})}}class Se extends we{constructor(e){super(e),__publicField(this,"index"),__privateAdd(this,u,void 0),__privateAdd(this,g,void 0),this.index=e.index,__privateSet(this,u,e.element),__privateSet(this,g,this.createRef((t=>{t.addEventListener("click",(()=>e.onDispose()))})))}pageClasses(){return["embed-page"]}createElementPage(){return ge.h("div",{classNames:["embed-page-inner"]},__privateGet(this,u)?__privateGet(this,u):ge.h("div",{classNames:["embed-page-default"]},ge.h("button",{classNames:["embed-page-default-close"],ref:__privateGet(this,g)},"閉じる")))}}u=new WeakMap,g=new WeakMap;
/*!
   * Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com
   * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
   * Copyright 2022 Fonticons, Inc.
   */
const ke="http://www.w3.org/2000/svg";function be(e){const[t,i,,,a]=e.icon,s=document.createElement("i");s.classList.add(`${e.prefix}-${e.iconName}`);const r=s.appendChild(document.createElementNS(ke,"svg"));r.classList.add("viewer-fa-icon"),r.setAttribute("viewBox",`0 0 ${t} ${i}`);const n=Array.isArray(a)?a:[a];for(const h of n){const e=r.appendChild(document.createElementNS(ke,"path"));e.setAttribute("fill","currentColor"),e.setAttribute("d",h)}return s}var Le={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="gear",i=[9881,"cog"],a="f013",s="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z";e.definition={prefix:"fas",iconName:t,icon:[512,512,i,a,s]},e.faGear=e.definition,e.prefix="fas",e.iconName=t,e.width=512,e.height=512,e.ligatures=i,e.unicode=a,e.svgPathData=s,e.aliases=i}(Le);const Me="viewer-control-area-visible";class Ae extends me{constructor(e){super(),__privateAdd(this,y),__privateAdd(this,m,void 0),__privateAdd(this,w,0),__privateAdd(this,f,!0),__privateAdd(this,G,void 0),__privateAdd(this,S,void 0),__privateAdd(this,k,void 0),__privateAdd(this,b,void 0),__privateAdd(this,L,void 0),__privateAdd(this,M,void 0),__privateAdd(this,A,void 0),__privateSet(this,m,e),__privateSet(this,G,this.createRef()),__privateSet(this,S,this.createRef((e=>{e.addEventListener("click",__privateGet(this,m).onClickLeft)}))),__privateSet(this,k,this.createRef((e=>{e.addEventListener("click",__privateGet(this,m).onClickRight)}))),__privateSet(this,b,this.createRef((e=>{e.value=`${__privateGet(this,w)}`;const t=()=>{if(!__privateGet(this,A).current)return;let t=Math.round(parseFloat(e.value))+1;const i=__privateGet(this,m).pageLength;i<t&&(t=i),__privateGet(this,A).current.innerHTML=`${t} / ${i}`};e.addEventListener("input",(()=>{var i;t(),null==(i=__privateGet(this,M).current)||i.classList.add("viewer-preview-show");const a=Math.round(parseFloat(e.value));__privateGet(this,m).onThumbnailChanged(a)}));const i=()=>{var e;null==(e=__privateGet(this,M).current)||e.classList.remove("viewer-preview-show")};e.addEventListener("input",(()=>{__privateMethod(this,y,N).call(this)})),e.addEventListener("focusout",i),e.addEventListener("mouseup",i),e.addEventListener("touchend",i),e.addEventListener("touchmove",(e=>{e.stopPropagation()})),e.addEventListener("change",(()=>{i();const t=Math.round(parseFloat(e.value));__privateSet(this,w,t),__privateGet(this,m).onPageSelectorChanged(t)}))}))),__privateSet(this,L,this.createRef((e=>{e.addEventListener("click",(()=>{__privateGet(this,m).onOpenSettings()}))}))),__privateSet(this,M,this.createRef()),__privateSet(this,A,this.createRef())}get direction(){return __privateGet(this,m).direction}set direction(e){__privateGet(this,m).direction!==e&&(__privateGet(this,m).direction=e,__privateMethod(this,y,N).call(this))}get currentIndex(){return __privateGet(this,w)}set currentIndex(e){__privateSet(this,w,e);const t=__privateGet(this,b).current;t&&(t.value=`${e}`,__privateMethod(this,y,N).call(this))}updatePageSelector(e){const t=__privateGet(this,b).current;if(!t)return;const i=Math.round(parseFloat(t.value)),a=Math.round(parseFloat(t.max)),s=__privateGet(this,m).pageLength,r=s+(s%2==0?0:e?1:0);t.setAttribute("max",`${r}`),t.setAttribute("step",""+(e?2:1)),r!==a&&i===a&&(t.value=`${r}`),__privateMethod(this,y,N).call(this)}get visible(){return __privateGet(this,f)}show(){var e;__privateSet(this,f,!0),null==(e=__privateGet(this,G).current)||e.classList.add(Me)}hide(){var e;__privateSet(this,f,!1),null==(e=__privateGet(this,G).current)||e.classList.remove(Me)}createElement(){return ge.h("div",{classNames:["viewer-control-area",Me],ref:__privateGet(this,G)},ge.h("div",{classNames:["viewer-header-ctrl"]},__privateGet(this,m).title&&ge.h("h1",{classNames:["viewer-title"]},ge.h("span",{classNames:["viewer-title-inner"]},__privateGet(this,m).title))),ge.h("button",{ref:__privateGet(this,S),classNames:["arrow-button","arrow-button-left"]},ge.h("i",{classNames:["arrow-button-inner"]})),ge.h("button",{ref:__privateGet(this,k),classNames:["arrow-button","arrow-button-right"]},ge.h("i",{classNames:["arrow-button-inner"]})),ge.h("div",{classNames:["viewer-footer-ctrl"]},ge.h("input",{ref:__privateGet(this,b),classNames:["viewer-page-selector"],type:"range",min:0,max:1,step:1,value:0}),ge.h("button",{ref:__privateGet(this,L),classNames:["view-settings-button"]},be(Le.faGear))),ge.h("div",{classNames:["viewer-preview"],ref:__privateGet(this,M)},ge.h("div",{classNames:["viewer-thumbnails"]},__privateGet(this,m).thumbnailElements),ge.h("div",{classNames:["viewer-preview-page-count"],ref:__privateGet(this,A)},"0 / 0")))}}m=new WeakMap,w=new WeakMap,f=new WeakMap,G=new WeakMap,S=new WeakMap,k=new WeakMap,b=new WeakMap,L=new WeakMap,M=new WeakMap,A=new WeakMap,y=new WeakSet,N=function(){const e=__privateGet(this,b).current;if(!e)return;const t=100*Math.round(parseFloat(e.value))/Math.round(parseFloat(e.max)),i=getComputedStyle(e).getPropertyValue("--viewer-page-selector-bg-color"),a=getComputedStyle(e).getPropertyValue("--viewer-page-selector-active-bg-color"),s="horizontal-rtl"===__privateGet(this,m).direction?"left":"right";e.style.background=`linear-gradient(to ${s},${a} ${t}%,${i} ${t}%)`};const ye={normal:"1ページ",spread:"見開き",auto:"自動"},Ne={"horizontal-ltr":"左から右 →","horizontal-rtl":"← 右から左"};class Ee extends me{constructor(e){super(),__privateAdd(this,E,void 0),__privateAdd(this,W,null),__privateAdd(this,x,void 0),__privateAdd(this,T,void 0),__privateAdd(this,R,void 0),__privateAdd(this,P,void 0),__privateAdd(this,C,void 0),__privateSet(this,E,e),__privateSet(this,x,this.createRef()),__privateSet(this,T,this.createRef((e=>{e.addEventListener("click",(()=>{this.close()}))}))),__privateSet(this,R,le.reduce(((e,t)=>(e[t]=this.createRef((e=>{e.addEventListener("change",(()=>{__privateGet(this,W)&&(__privateGet(this,W).pageStyle=e.value)}))})),e)),{})),__privateSet(this,P,ce.reduce(((e,t)=>(e[t]=this.createRef((e=>{e.addEventListener("change",(()=>{__privateGet(this,W)&&(__privateGet(this,W).direction=e.value)}))})),e)),{})),__privateSet(this,C,this.createRef((e=>{e.addEventListener("click",(()=>{this.close()}))})))}show(e){var t;__privateSet(this,W,e);for(const i of Object.keys(__privateGet(this,R))){const t=__privateGet(this,R)[i].current;t&&(e.pageStyle===i?t.setAttribute("checked","true"):t.removeAttribute("checked"))}for(const i of Object.keys(__privateGet(this,P))){const t=__privateGet(this,P)[i].current;t&&(e.direction===i?t.setAttribute("checked","true"):t.removeAttribute("checked"))}null==(t=__privateGet(this,x).current)||t.classList.add("show-settings")}close(){var e;null==(e=__privateGet(this,x).current)||e.classList.remove("show-settings"),__privateGet(this,W)&&__privateGet(this,E).onSettingsChange(__privateGet(this,W))}createElement(){return ge.h("div",{ref:__privateGet(this,x),classNames:["view-settings"]},ge.h("div",{ref:__privateGet(this,T),classNames:["modal-bg"]}),ge.h("div",{classNames:["view-settings-main"]},ge.h("h1",{classNames:["view-settings-title"]},"Settings"),ge.h("div",{classNames:["view-settings-content"]},ge.h("h2",{classNames:["view-settings-content-title"]},"ページ表示"),ge.h("group",{classNames:["view-settings-radio-groups"]},le.map((e=>ge.h("label",{classNames:["view-settings-label"]},ge.h("input",{ref:__privateGet(this,R)[e],classNames:["view-settings-radio"],type:"radio",name:"pageStyle",value:e,checked:!1}),ge.h("span",{classNames:["view-settings-label-text"]},ye[e]||e)))))),ge.h("div",{classNames:["view-settings-content"]},ge.h("h2",{classNames:["view-settings-content-title"]},"読む方向"),ge.h("group",{classNames:["view-settings-radio-groups"]},ce.map((e=>ge.h("label",{classNames:["view-settings-label"]},ge.h("input",{ref:__privateGet(this,P)[e],classNames:["view-settings-radio"],type:"radio",name:"direction",value:e,checked:!1}),ge.h("span",{classNames:["view-settings-label-text"]},Ne[e]||e)))))),ge.h("button",{ref:__privateGet(this,C),classNames:["view-settings-close-button"]},be(ue.faXmark))))}}E=new WeakMap,W=new WeakMap,x=new WeakMap,T=new WeakMap,R=new WeakMap,P=new WeakMap,C=new WeakMap;const We="viewer-first-page-shown",xe="viewer-last-page-shown";class Te extends me{constructor(e,t){let i;super(),__privateAdd(this,Q),__privateAdd(this,Z),__privateAdd(this,te),__privateAdd(this,ae),__privateAdd(this,re),__publicField(this,"pages"),__privateAdd(this,z,void 0),__privateAdd(this,$,void 0),__privateAdd(this,I,void 0),__privateAdd(this,F,void 0),__privateAdd(this,O,void 0),__privateAdd(this,j,void 0),__privateAdd(this,B,[]),__privateAdd(this,D,[]),__privateAdd(this,V,!1),__privateAdd(this,X,void 0),__privateAdd(this,H,void 0),__privateAdd(this,q,void 0),__privateAdd(this,U,void 0),__privateAdd(this,J,void 0),__privateAdd(this,K,void 0),__privateSet(this,j,t);let a=!0;__privateSet(this,X,"spread"===t.pageStyle);const s=__privateGet(this,j).controlShowTime<=0,r=()=>{s||a&&(window.clearTimeout(i),__privateGet(this,F).show(),i=window.setTimeout((()=>{__privateGet(this,F).hide()}),__privateGet(this,j).controlShowTime))},n=()=>{a=!1,s||(window.clearTimeout(i),__privateGet(this,F).show())},h=()=>{a=!0,r()};__privateSet(this,H,this.createRef((e=>{e.style.setProperty("--default-width",`${__privateGet(this,j).pageSize.width}`),e.style.setProperty("--default-wide-width",""+2*__privateGet(this,j).pageSize.width),e.style.setProperty("--default-height",`${__privateGet(this,j).pageSize.height}`),e.addEventListener("click",r),h()}))),__privateSet(this,q,this.createRef()),this.pages=e.map(((e,t)=>new fe(e,{index:t,size:__privateGet(this,j).pageSize,onTapLeft:()=>this.goLeft(),onTapRight:()=>this.goRight()}))),__privateSet(this,z,new Ge({index:this.pages.length,onTapLeft:()=>this.goLeft(),onTapRight:()=>this.goRight()})),__privateSet(this,$,new Se({index:this.pages.length+1,element:__privateGet(this,j).lastPageElement,onTapLeft:()=>this.goLeft(),onTapRight:()=>this.goRight(),onDispose:()=>__privateGet(this,j).onDispose()})),__privateSet(this,I,[...this.pages,__privateGet(this,z),__privateGet(this,$)]),__privateSet(this,F,new Ae({title:__privateGet(this,j).title,pageLength:this.pages.length,direction:__privateGet(this,j).direction,thumbnailElements:__privateGet(this,I).map((e=>e.createThumbnailElement())),onOpenSettings:()=>{n(),__privateGet(this,O).show({direction:this.direction,pageStyle:this.pageStyle})},onClickLeft:()=>this.goLeft(),onClickRight:()=>this.goRight(),onThumbnailChanged:e=>{r();const t=__privateGet(this,I).find((t=>t.index===e)),i=t===__privateGet(this,z)?__privateGet(this,$).thumbnailElement:null==t?void 0:t.thumbnailElement;null==i||i.scrollIntoView()},onPageSelectorChanged:e=>this.goTo(e)})),__privateSet(this,O,new Ee({onSettingsChange:e=>{this.direction=e.direction,this.pageStyle=e.pageStyle,__privateMethod(this,re,ne).call(this),h()}})),__privateSet(this,J,this.createRef((e=>{new IntersectionObserver((e=>{for(const t of e){const e=t.isIntersecting;__privateSet(this,X,e),__privateGet(this,F).updatePageSelector(e)}}),{root:__privateGet(this,H).current}).observe(e)}))),__privateSet(this,K,this.createRef((e=>{e.addEventListener("click",(()=>{__privateGet(this,j).onDispose()}))}))),__privateSet(this,U,this.createRef((e=>{__privateMethod(this,te,ie).call(this,e,__privateGet(this,I)),e.addEventListener("click",(e=>{e.stopPropagation(),s||(__privateGet(this,F).visible?(window.clearTimeout(i),__privateGet(this,F).hide()):r())}))})))}get pageStyle(){return __privateGet(this,j).pageStyle}set pageStyle(e){__privateGet(this,j).pageStyle!==e&&(__privateGet(this,j).pageStyle=e,__privateMethod(this,Q,Y).call(this))}get direction(){return __privateGet(this,j).direction}set direction(e){__privateGet(this,j).direction!==e&&(__privateGet(this,j).direction=e,__privateGet(this,F).direction=e,__privateMethod(this,Q,Y).call(this))}openSettings(){__privateGet(this,V)&&__privateSet(this,V,!1)}closeSettings(){__privateGet(this,V)||__privateSet(this,V,!0)}createElement(){const e=__privateMethod(this,Z,ee).call(this);return ge.h("div",{classNames:e,ref:__privateGet(this,H)},ge.h("div",{classNames:["modal-bg","viewer-bg"]}),ge.h("div",{ref:__privateGet(this,q),classNames:["viewer-main"]},ge.h("div",{ref:__privateGet(this,U),classNames:["viewer-pages"]},__privateGet(this,I).map((e=>e.createElement()))),__privateGet(this,F).createElement()),ge.h("button",{ref:__privateGet(this,K),classNames:["viewer-close-button"]},be(ue.faXmark)),__privateGet(this,O).createElement(),ge.h("div",{classNames:["page-style-checker"],ref:__privateGet(this,J)}))}get currentIndex(){return 0===__privateGet(this,D).length?0:Math.min(...__privateGet(this,D))}get isLastPage(){const e=__privateGet(this,I).find((e=>e.index===this.currentIndex));return(null==e?void 0:e.element)===__privateGet(this,$).element}onCurrentIndexChanged(e){__privateGet(this,B).push(e)}goBack(){this.goTo(this.currentIndex-(__privateGet(this,X)||this.isLastPage?2:1))}goNext(){this.goTo(this.currentIndex+(__privateGet(this,X)?2:1))}goLeft(){"horizontal-rtl"===__privateGet(this,j).direction?this.goNext():this.goBack()}goRight(){"horizontal-rtl"===__privateGet(this,j).direction?this.goBack():this.goNext()}goTo(e){const t=__privateGet(this,I).find((t=>t.index===e)),i=t===__privateGet(this,z)?__privateGet(this,$).element:null==t?void 0:t.element;window.setTimeout((()=>{null==i||i.scrollIntoView()}),1)}}z=new WeakMap,$=new WeakMap,I=new WeakMap,F=new WeakMap,O=new WeakMap,j=new WeakMap,B=new WeakMap,D=new WeakMap,V=new WeakMap,X=new WeakMap,H=new WeakMap,q=new WeakMap,U=new WeakMap,J=new WeakMap,K=new WeakMap,Q=new WeakSet,Y=function(){const e=__privateGet(this,H).current;e&&(e.setAttribute("class",""),e.classList.add(...__privateMethod(this,Z,ee).call(this)))},Z=new WeakSet,ee=function(){const e=[ve,`${ve}-root`];return __privateGet(this,j).direction.startsWith("horizontal-")&&e.push("horizontal-viewer"),e.push(__privateGet(this,j).direction),e.push(`page-style-${__privateGet(this,j).pageStyle}`),__privateGet(this,j).modal&&e.push("modal-viewer"),e},te=new WeakSet,ie=function(e,t){const i=new Set;let a,s=!1;e.addEventListener("scroll",(()=>{null!=a&&window.clearTimeout(a),a=window.setTimeout((()=>{a=void 0,s&&(s=!1,__privateMethod(this,ae,se).call(this,[...i]))}),100)}));const r=new IntersectionObserver((e=>{for(const r of e){const e=t.find((e=>e.element===r.target));e&&(r.isIntersecting?i.add(e.index):i.delete(e.index),null!=a?s=!0:(s=!1,__privateMethod(this,ae,se).call(this,[...i])))}}),{root:e,threshold:.6});for(const n of t)n.setup((e=>{r.observe(e)}))},ae=new WeakSet,se=function(e){__privateSet(this,D,e),__privateGet(this,F).currentIndex=this.currentIndex,__privateMethod(this,re,ne).call(this);for(const t of __privateGet(this,B))t(this.currentIndex)},re=new WeakSet,ne=function(){var e,t,i,a;__privateGet(this,D).includes(0)?null==(e=__privateGet(this,H).current)||e.classList.add(We):null==(t=__privateGet(this,H).current)||t.classList.remove(We),__privateGet(this,D).includes(__privateGet(this,$).index)?null==(i=__privateGet(this,H).current)||i.classList.add(xe):null==(a=__privateGet(this,H).current)||a.classList.remove(xe)};class Re{constructor(e,{parent:t,...i}){__privateAdd(this,he,void 0),__privateAdd(this,_e,void 0),__privateAdd(this,oe,void 0),__privateAdd(this,pe,!1),__privateAdd(this,de,(e=>{"ArrowLeft"===e.key||"Left"===e.key?__privateGet(this,he).goLeft():"ArrowRight"!==e.key&&"Right"!==e.key||__privateGet(this,he).goRight()})),__privateSet(this,he,new Te(e,{...i,onDispose:()=>this.dispose()})),__privateSet(this,_e,t),__privateSet(this,oe,Pe(__privateGet(this,he).createElement(),__privateGet(this,_e)));__privateGet(this,he).onCurrentIndexChanged((e=>{const t=__privateGet(this,he).pages.filter((t=>!t.loaded&&t.index>=e&&t.index<e+4));for(const i of t)i.contentLoad()}));let a=Promise.resolve();for(const s of __privateGet(this,he).pages)a=a.then((async()=>{try{await s.contentLoad()}catch(e){console.error(e)}}));document.addEventListener("keydown",__privateGet(this,de))}get pages(){return __privateGet(this,he).pages}get disposed(){return __privateGet(this,pe)}goBack(){__privateGet(this,he).goBack()}goNext(){__privateGet(this,he).goNext()}goLeft(){__privateGet(this,he).goLeft()}goRight(){__privateGet(this,he).goRight()}goTo(e){__privateGet(this,he).goTo(e)}dispose(){__privateGet(this,pe)||(document.removeEventListener("keydown",__privateGet(this,de)),__privateGet(this,oe)&&__privateGet(this,_e).removeChild(__privateGet(this,oe)),__privateSet(this,pe,!0))}}function Pe(e,t){var i;const{tag:a,props:s,children:r}=e;if("function"==typeof a)throw"Not support";const n=t.appendChild(document.createElement(a));for(const h of r.flat())h instanceof HTMLElement?n.appendChild(h):"string"==typeof h?n.append(h):Pe(h,n);if(s){const{ref:e,classNames:t,...a}=s;n.classList.add(...t);for(const i of Object.keys(a)){const e=`${a[i]}`;"checked"===i&&"false"===e||n.setAttribute(i,e)}e&&(e.current=n,null==(i=e.setup)||i.call(e,n))}return n}he=new WeakMap,_e=new WeakMap,oe=new WeakMap,pe=new WeakMap,de=new WeakMap;class Ce{constructor(e){__publicField(this,"loadLimit",20),this.load=e}limit(e){return this.loadLimit=e,this}build(e){const t=this.load,i=this.loadLimit;let a=Promise.resolve([]);const s=[];for(let r=0;r<e;r+=i){const n=e-r>=i?i:e-r,h=a=a.then((()=>t(n,r)));s.push(Array(n).fill(0).map(((e,t)=>h.then((e=>e[t])))))}return s.flat()}}function ze(e,t){const i=function(e){var t,i,a;const s=(null==e?void 0:e.pageSize)||{width:840,height:1188},r=(null==e?void 0:e.pageStyle)||"auto",n=(null==e?void 0:e.direction)||"horizontal-rtl",h=null!=(t=null==e?void 0:e.modal)?t:void 0===(null==e?void 0:e.insertTarget);return{pageSize:s,pageStyle:r,direction:n,modal:h,title:null!=(i=null==e?void 0:e.title)?i:"",controlShowTime:null!=(a=null==e?void 0:e.controlShowTime)?a:3e3,lastPageElement:null==e?void 0:e.lastPageElement}}(t),a=null==t?void 0:t.insertTarget;let s;if(s=i.modal?document.body:"string"==typeof a?document.querySelector(a):a,null==s)throw`Missing element: ${a}`;return new Re(e.map((e=>Promise.resolve(e))),{parent:s,...i})}return ze.asyncLoadBuilder=function(e){return new Ce(e)},ze}));
